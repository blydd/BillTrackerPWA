# éƒ¨ç½²è¯´æ˜

## ğŸ“¦ æ„å»ºé¡¹ç›®

\`\`\`bash
cd expense-tracker-pwa
npm install
npm run build
\`\`\`

æ„å»ºå®Œæˆåï¼Œ`dist` ç›®å½•åŒ…å«æ‰€æœ‰éœ€è¦éƒ¨ç½²çš„æ–‡ä»¶ã€‚

## ğŸŒ éƒ¨ç½²é€‰é¡¹

### 1. Vercelï¼ˆæ¨èï¼‰

æœ€ç®€å•çš„éƒ¨ç½²æ–¹å¼ï¼š

\`\`\`bash
# å®‰è£… Vercel CLI
npm i -g vercel

# ç™»å½•
vercel login

# éƒ¨ç½²
vercel --prod
\`\`\`

æˆ–è€…é€šè¿‡ Vercel ç½‘ç«™ï¼š
1. è®¿é—® https://vercel.com
2. å¯¼å…¥ Git ä»“åº“
3. è‡ªåŠ¨æ£€æµ‹ Vite é¡¹ç›®å¹¶éƒ¨ç½²

### 2. Netlify

\`\`\`bash
# å®‰è£… Netlify CLI
npm i -g netlify-cli

# ç™»å½•
netlify login

# éƒ¨ç½²
netlify deploy --prod --dir=dist
\`\`\`

æˆ–è€…æ‹–æ‹½éƒ¨ç½²ï¼š
1. è®¿é—® https://app.netlify.com/drop
2. æ‹–æ‹½ `dist` ç›®å½•

### 3. GitHub Pages

\`\`\`bash
# å®‰è£… gh-pages
npm i -D gh-pages

# æ·»åŠ éƒ¨ç½²è„šæœ¬åˆ° package.json
# "deploy": "gh-pages -d dist"

# éƒ¨ç½²
npm run deploy
\`\`\`

æ³¨æ„ï¼šéœ€è¦åœ¨ `vite.config.ts` ä¸­è®¾ç½® `base: '/ä»“åº“å/'`

### 4. è‡ªå·±çš„æœåŠ¡å™¨

#### ä½¿ç”¨ Nginx

1. ä¸Šä¼  `dist` ç›®å½•åˆ°æœåŠ¡å™¨
2. é…ç½® Nginxï¼š

\`\`\`nginx
server {
    listen 80;
    server_name your-domain.com;
    root /var/www/expense-tracker;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    # å¯ç”¨ gzip å‹ç¼©
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;

    # ç¼“å­˜é™æ€èµ„æº
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # Service Worker ä¸ç¼“å­˜
    location = /sw.js {
        add_header Cache-Control "no-cache";
        expires 0;
    }
}
\`\`\`

#### ä½¿ç”¨ Apache

åˆ›å»º `.htaccess` æ–‡ä»¶ï¼š

\`\`\`apache
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.html$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.html [L]
</IfModule>
\`\`\`

### 5. Docker éƒ¨ç½²

åˆ›å»º `Dockerfile`ï¼š

\`\`\`dockerfile
FROM node:18-alpine as build
WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=build /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/conf.d/default.conf
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
\`\`\`

åˆ›å»º `nginx.conf`ï¼š

\`\`\`nginx
server {
    listen 80;
    server_name localhost;
    root /usr/share/nginx/html;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }
}
\`\`\`

æ„å»ºå’Œè¿è¡Œï¼š

\`\`\`bash
docker build -t expense-tracker .
docker run -p 8080:80 expense-tracker
\`\`\`

## ğŸ”’ HTTPS é…ç½®

PWA éœ€è¦ HTTPS æ‰èƒ½æ­£å¸¸å·¥ä½œï¼ˆæœ¬åœ°å¼€å‘é™¤å¤–ï¼‰ã€‚

### ä½¿ç”¨ Let's Encryptï¼ˆå…è´¹ï¼‰

\`\`\`bash
# å®‰è£… certbot
sudo apt install certbot python3-certbot-nginx

# è·å–è¯ä¹¦
sudo certbot --nginx -d your-domain.com

# è‡ªåŠ¨ç»­æœŸ
sudo certbot renew --dry-run
\`\`\`

## âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [ ] æ„å»ºæˆåŠŸï¼ˆ`npm run build`ï¼‰
- [ ] æœ¬åœ°é¢„è§ˆæ­£å¸¸ï¼ˆ`npm run preview`ï¼‰
- [ ] é…ç½®äº† HTTPS
- [ ] Service Worker æ­£å¸¸å·¥ä½œ
- [ ] å¯ä»¥å®‰è£…åˆ°ä¸»å±å¹•
- [ ] ç¦»çº¿åŠŸèƒ½æ­£å¸¸
- [ ] æ‰€æœ‰è·¯ç”±æ­£å¸¸å·¥ä½œ
- [ ] é™æ€èµ„æºç¼“å­˜é…ç½®æ­£ç¡®

## ğŸ¯ æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **å¯ç”¨ gzip/brotli å‹ç¼©**
2. **é…ç½®é™æ€èµ„æºç¼“å­˜**
3. **ä½¿ç”¨ CDN åŠ é€Ÿ**
4. **å¯ç”¨ HTTP/2**
5. **ä¼˜åŒ–å›¾ç‰‡èµ„æº**

## ğŸ“Š ç›‘æ§

éƒ¨ç½²åå»ºè®®æ·»åŠ ï¼š
- Google Analyticsï¼ˆåˆ†æç”¨æˆ·è¡Œä¸ºï¼‰
- Sentryï¼ˆé”™è¯¯ç›‘æ§ï¼‰
- Lighthouse CIï¼ˆæ€§èƒ½ç›‘æ§ï¼‰

## ğŸ”„ æ›´æ–°éƒ¨ç½²

\`\`\`bash
# æ‹‰å–æœ€æ–°ä»£ç 
git pull

# é‡æ–°æ„å»º
npm run build

# é‡æ–°éƒ¨ç½²ï¼ˆæ ¹æ®ä½ çš„éƒ¨ç½²æ–¹å¼ï¼‰
vercel --prod
# æˆ–
netlify deploy --prod --dir=dist
# æˆ–ä¸Šä¼ åˆ°æœåŠ¡å™¨
\`\`\`

## ğŸ’¡ æç¤º

- é¦–æ¬¡éƒ¨ç½²åï¼Œç”¨æˆ·å¯èƒ½éœ€è¦æ¸…é™¤ç¼“å­˜æ‰èƒ½çœ‹åˆ°æ›´æ–°
- Service Worker ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œä½†å¯èƒ½æœ‰å»¶è¿Ÿ
- å»ºè®®åœ¨ `package.json` ä¸­æ›´æ–°ç‰ˆæœ¬å·ï¼Œæ–¹ä¾¿è¿½è¸ª
