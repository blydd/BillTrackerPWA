# ç»Ÿè®¡åŠŸèƒ½ä¿®å¤è¯´æ˜Ž

## ðŸ› é—®é¢˜æè¿°

åœ¨ç»Ÿè®¡åˆ†æžä¸­ï¼Œæ”¶å…¥ç±»åž‹çš„è´¦å•è¢«é”™è¯¯åœ°ç»Ÿè®¡åˆ°äº†æ”¯å‡ºç±»åž‹ä¸­ã€‚

## ðŸ” é—®é¢˜åŽŸå› 

åŽŸä»£ç ä½¿ç”¨ `paymentMethod.transactionType` æ¥åˆ¤æ–­è´¦å•çš„ç±»åž‹ï¼Œä½†è¿™æ˜¯é”™è¯¯çš„ï¼š

```swift
// âŒ é”™è¯¯çš„åšæ³•
let transactionType = paymentMethod.transactionType
```

**ä¸ºä»€ä¹ˆé”™è¯¯ï¼Ÿ**
- æ”¯ä»˜æ–¹å¼çš„ `transactionType` åªè¡¨ç¤ºè¯¥æ”¯ä»˜æ–¹å¼çš„é»˜è®¤ç±»åž‹
- ä½†å®žé™…è´¦å•å¯èƒ½æ˜¯æ”¶å…¥ä¹Ÿå¯èƒ½æ˜¯æ”¯å‡º
- ä¾‹å¦‚ï¼šä¸€ä¸ª"æ”¯å‡º"ç±»åž‹çš„æ”¯ä»˜æ–¹å¼ä¹Ÿå¯ä»¥ç”¨æ¥è®°å½•æ”¶å…¥ï¼ˆå¦‚é€€æ¬¾ï¼‰

## âœ… ä¿®å¤æ–¹æ¡ˆ

æ ¹æ®è´¦å•çš„å®žé™…é‡‘é¢æ¥åˆ¤æ–­äº¤æ˜“ç±»åž‹ï¼š

```swift
// âœ… æ­£ç¡®çš„åšæ³•
let actualTransactionType: TransactionType
if isExcluded {
    actualTransactionType = .excluded
} else if bill.amount > 0 {
    actualTransactionType = .income  // æ­£æ•° = æ”¶å…¥
} else {
    actualTransactionType = .expense // è´Ÿæ•° = æ”¯å‡º
}
```

## ðŸ“Š ä¿®å¤çš„ç»Ÿè®¡é¡¹

1. **æŒ‰ç±»åž‹ç»Ÿè®¡** - çŽ°åœ¨æ­£ç¡®åŒºåˆ†æ”¶å…¥å’Œæ”¯å‡º
2. **æŒ‰å½’å±žäººç»Ÿè®¡** - çŽ°åœ¨æ­£ç¡®åŒºåˆ†æ”¶å…¥å’Œæ”¯å‡º
3. **æŒ‰æ”¯ä»˜æ–¹å¼ç»Ÿè®¡** - çŽ°åœ¨æ­£ç¡®åŒºåˆ†æ”¶å…¥å’Œæ”¯å‡º
4. **å›¾è¡¨ç»Ÿè®¡** - ä½¿ç”¨ç›¸åŒçš„æ•°æ®æºï¼Œä¹Ÿä¼šæ­£ç¡®æ˜¾ç¤º

## ðŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•åœºæ™¯ 1ï¼šæ”¶å…¥è´¦å•
1. åˆ›å»ºä¸€ä¸ªæ”¶å…¥è´¦å•ï¼ˆé‡‘é¢ä¸ºæ­£æ•°ï¼‰
2. æŸ¥çœ‹ç»Ÿè®¡é¡µé¢
3. åº”è¯¥åœ¨"æ”¶å…¥"æ ‡ç­¾é¡µä¸­æ˜¾ç¤º

### æµ‹è¯•åœºæ™¯ 2ï¼šæ”¯å‡ºè´¦å•
1. åˆ›å»ºä¸€ä¸ªæ”¯å‡ºè´¦å•ï¼ˆé‡‘é¢ä¸ºè´Ÿæ•°ï¼‰
2. æŸ¥çœ‹ç»Ÿè®¡é¡µé¢
3. åº”è¯¥åœ¨"æ”¯å‡º"æ ‡ç­¾é¡µä¸­æ˜¾ç¤º

### æµ‹è¯•åœºæ™¯ 3ï¼šä¸è®¡å…¥è´¦å•
1. åˆ›å»ºä¸€ä¸ªä¸è®¡å…¥ç±»åž‹çš„è´¦å•
2. æŸ¥çœ‹ç»Ÿè®¡é¡µé¢
3. åº”è¯¥åœ¨"ä¸è®¡å…¥"æ ‡ç­¾é¡µä¸­æ˜¾ç¤º
4. ä¸åº”è¯¥å½±å“æ€»æ”¶å…¥å’Œæ€»æ”¯å‡º

### æµ‹è¯•åœºæ™¯ 4ï¼šæ··åˆè´¦å•
1. åˆ›å»ºå¤šä¸ªä¸åŒç±»åž‹çš„è´¦å•
2. æŸ¥çœ‹å„ä¸ªç»Ÿè®¡ç»´åº¦
3. æ¯ä¸ªç»´åº¦éƒ½åº”è¯¥æ­£ç¡®åŒºåˆ†æ”¶å…¥ã€æ”¯å‡ºã€ä¸è®¡å…¥

## ðŸ“‹ éªŒè¯æ¸…å•

- [ ] æŒ‰ç±»åž‹ç»Ÿè®¡ - æ”¶å…¥æ˜¾ç¤ºåœ¨æ”¶å…¥æ ‡ç­¾é¡µ
- [ ] æŒ‰ç±»åž‹ç»Ÿè®¡ - æ”¯å‡ºæ˜¾ç¤ºåœ¨æ”¯å‡ºæ ‡ç­¾é¡µ
- [ ] æŒ‰å½’å±žäººç»Ÿè®¡ - æ”¶å…¥æ˜¾ç¤ºåœ¨æ”¶å…¥æ ‡ç­¾é¡µ
- [ ] æŒ‰å½’å±žäººç»Ÿè®¡ - æ”¯å‡ºæ˜¾ç¤ºåœ¨æ”¯å‡ºæ ‡ç­¾é¡µ
- [ ] æŒ‰æ”¯ä»˜æ–¹å¼ç»Ÿè®¡ - æ”¶å…¥æ˜¾ç¤ºåœ¨æ”¶å…¥æ ‡ç­¾é¡µ
- [ ] æŒ‰æ”¯ä»˜æ–¹å¼ç»Ÿè®¡ - æ”¯å‡ºæ˜¾ç¤ºåœ¨æ”¯å‡ºæ ‡ç­¾é¡µ
- [ ] å›¾è¡¨ç»Ÿè®¡ - æ­£ç¡®æ˜¾ç¤ºæ”¶å…¥å’Œæ”¯å‡º
- [ ] æ€»è§ˆ - æ€»æ”¶å…¥å’Œæ€»æ”¯å‡ºæ­£ç¡®è®¡ç®—

## ðŸ”„ å¦‚ä½•æµ‹è¯•

1. **é‡æ–°ç¼–è¯‘åº”ç”¨**ï¼šæŒ‰ âŒ˜ + B
2. **è¿è¡Œåˆ°è®¾å¤‡**ï¼šæŒ‰ âŒ˜ + R
3. **è¿›å…¥ç»Ÿè®¡é¡µé¢**
4. **åˆ‡æ¢ä¸åŒçš„æ ‡ç­¾é¡µ**ï¼ˆæ”¶å…¥/æ”¯å‡º/ä¸è®¡å…¥ï¼‰
5. **éªŒè¯æ•°æ®æ˜¯å¦æ­£ç¡®åˆ†ç±»**

## ðŸ’¡ æŠ€æœ¯ç»†èŠ‚

### è´¦å•é‡‘é¢çš„å«ä¹‰
```swift
bill.amount > 0  // æ”¶å…¥
bill.amount < 0  // æ”¯å‡º
bill.amount == 0 // æ— æ•ˆï¼ˆä¸åº”è¯¥å­˜åœ¨ï¼‰
```

### äº¤æ˜“ç±»åž‹çš„åˆ¤æ–­é€»è¾‘
```swift
1. å…ˆæ£€æŸ¥æ˜¯å¦ä¸º"ä¸è®¡å…¥"ç±»åž‹
   - å¦‚æžœè´¦å•çš„æ‰€æœ‰ç±»åž‹éƒ½æ˜¯"ä¸è®¡å…¥"ï¼Œåˆ™ actualTransactionType = .excluded

2. å¦‚æžœä¸æ˜¯"ä¸è®¡å…¥"ï¼Œæ ¹æ®é‡‘é¢åˆ¤æ–­
   - bill.amount > 0 â†’ actualTransactionType = .income
   - bill.amount < 0 â†’ actualTransactionType = .expense

3. ä½¿ç”¨ actualTransactionType è¿›è¡Œç»Ÿè®¡åˆ†ç±»
```

## âœ… ä¿®å¤å®Œæˆ

çŽ°åœ¨ç»Ÿè®¡åŠŸèƒ½åº”è¯¥èƒ½æ­£ç¡®åŒºåˆ†æ”¶å…¥å’Œæ”¯å‡ºäº†ï¼

---

**ä¿®å¤æ—¶é—´**ï¼š2024-12-09  
**å½±å“èŒƒå›´**ï¼šViewModels/StatisticsViewModel.swift  
**æµ‹è¯•çŠ¶æ€**ï¼šå¾…éªŒè¯
