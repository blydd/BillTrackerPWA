# 统计页面月份选择功能优化完成

## 优化内容

为统计页面添加了自定义月份选择功能，用户现在可以查看任意月份的统计数据。

## 新增功能

### 1. 月份选择器
- 在时间范围选择器中添加了"选择月份"选项
- 当选择"选择月份"时，会显示一个月份选择按钮
- 点击按钮弹出月份选择器，支持选择任意年月

### 2. 用户界面优化
- 月份选择器使用滚轮样式，方便用户选择
- 显示格式为"yyyy年MM月"，符合中文用户习惯
- 支持取消和确定操作

### 3. 数据更新逻辑
- 选择月份后自动重新计算统计数据
- 支持实时更新，无需手动刷新

## 技术实现

### 修改的文件
- `Views/StatisticsView.swift`

### 主要变更

1. **枚举扩展**
   ```swift
   enum TimeRange: String, CaseIterable {
       case thisMonth = "本月"
       case lastMonth = "上月"
       case customMonth = "选择月份"  // 新增
       case thisYear = "今年"
       case all = "全部"
   }
   ```

2. **状态变量**
   ```swift
   @State private var showingMonthPicker = false
   @State private var selectedMonth = Date()
   ```

3. **UI组件**
   - 添加了月份选择按钮
   - 添加了月份选择器弹窗
   - 支持iOS兼容的弹窗样式

4. **日期范围计算**
   ```swift
   case .customMonth:
       let start = calendar.date(from: calendar.dateComponents([.year, .month], from: selectedMonth))
       guard let monthStart = start,
             let monthEnd = calendar.date(byAdding: .month, value: 1, to: monthStart) else {
           return (nil, nil)
       }
       return (monthStart, monthEnd)
   ```

## 使用方法

1. 打开统计页面
2. 在时间范围选择器中选择"选择月份"
3. 点击"选择的月份"按钮
4. 在弹出的月份选择器中选择目标月份
5. 点击"确定"查看该月份的统计数据

## 功能特点

- **灵活性**：可以查看任意月份的统计数据
- **易用性**：直观的月份选择界面
- **实时性**：选择后立即更新统计数据
- **兼容性**：支持iOS 15+的弹窗样式

## 优化时间
2024年12月22日