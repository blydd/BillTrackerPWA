# ExpenseTracker - 账单管理应用

一个简洁实用的 iOS 账单管理应用，支持多人账单记录、支付方式管理和统计分析。

## 系统要求

- iOS 15.0+
- Xcode 14.0+
- Swift 5.7+

## 功能特性

### 📝 账单管理
- 支持三种交易类型：支出、收入、不计入
- 多账单类型标签（可多选）
- 按日期分组显示，每日自动汇总收支
- 支持备注信息
- 删除账单自动恢复支付方式余额

### 💳 支付方式管理
- **信贷方式**：信用卡、花呗等，支持额度管理和欠费追踪
- **储蓄方式**：微信、支付宝等，支持余额管理
- 按归属人分类管理，每个人独立的支付方式
- 创建账单时自动更新支付方式余额

### 👥 多人账单
- 支持多个归属人（默认：男主、女主、公主、少主）
- 每个归属人独立的支付方式
- 按归属人统计支出

### 📊 统计分析
- 总收入、总支出、净收入统计
- 按账单类型统计
- 按归属人统计
- 按支付方式统计
- 支持时间范围筛选（本月、上月、今年、全部）

### 📤 数据导出
- 导出为 CSV 格式
- 包含完整的账单信息

### 🔄 初始化功能
- 一键创建基础数据
- 为"男主"和"女主"各生成一套完整的支付方式
- 预设常用账单类型（衣食住行等）

## 使用教程

### 初次使用
1. 打开应用，进入"设置"页面
2. 点击"初始化"创建基础数据（账单类型、归属人、支付方式）
3. 根据需要在"设置"中管理账单类型、归属人和支付方式

### 添加账单
1. 在"账单"页面点击右上角 ➕
2. 选择交易类型（支出/收入/不计入）
3. 输入金额
4. 选择归属人
5. 选择支付方式（只显示该归属人的支付方式）
6. 选择账单类型（可多选）
7. 可选填写备注
8. 点击"保存"

### 管理支付方式
1. 进入"设置" → "支付方式管理"
2. 选择账户类型（信贷/储蓄）
3. 选择归属人（顶部横向滚动按钮）
4. 点击 ➕ 添加新的支付方式
5. 点击"编辑"修改现有支付方式

### 查看统计
1. 进入"统计"页面
2. 选择时间范围
3. 查看各维度的统计数据

## 安装到手机

### 方法一：Xcode 直接安装（推荐，免费）

**前提条件**
- Mac 电脑 + Xcode
- iPhone 数据线
- Apple ID（免费账号即可）

**步骤**

1. 用数据线连接 iPhone 到 Mac

2. 在 Xcode 中打开项目
   ```bash
   open ExpenseTracker.xcodeproj
   ```

3. 配置签名
   - 选择项目 → ExpenseTracker target
   - 点击 "Signing & Capabilities"
   - 勾选 "Automatically manage signing"
   - 选择你的 Apple ID

4. 选择设备并运行
   - 在 Xcode 顶部选择你的 iPhone
   - 点击 ▶️ 运行

5. 信任开发者（首次运行）
   - iPhone：设置 → 通用 → VPN与设备管理
   - 点击你的 Apple ID → 信任

**注意**：免费账号应用只能运行 7 天，之后需要重新安装。

### 方法二：TestFlight（需要开发者账号）

如果有 Apple Developer Program 账号（$99/年）：
- 应用可运行 90 天
- 可分享给其他测试用户

## 技术栈

- SwiftUI
- MVVM 架构
- UserDefaults 本地存储
- Combine 响应式编程

## 数据存储

应用使用 UserDefaults 存储数据，数据保存在本地设备上。

**注意**：
- 数据仅存储在本地，不会上传到云端
- 卸载应用会清除所有数据
- 建议定期使用导出功能备份数据

## 项目结构

```
ExpenseTracker/
├── Models/              # 数据模型
├── ViewModels/          # 业务逻辑
├── Views/               # 界面视图
└── Repository/          # 数据持久化
```

## 特色功能

### 智能余额管理
- 创建账单时自动更新支付方式余额
- 信贷方式自动计算可用额度
- 删除账单自动回滚余额变化

### 归属人隔离
- 每个归属人独立的支付方式
- 创建账单时只显示对应归属人的支付方式
- 防止误操作他人账户

### 灵活的账单类型
- **支出**：日常消费，金额为负数
- **收入**：工资等收入，金额为正数
- **不计入**：信用卡还款等，更新余额但不计入统计

## 开发计划

- [ ] 支持 iCloud 同步
- [ ] 数据备份与恢复
- [ ] 更多图表展示
- [ ] 预算管理功能
- [ ] 账单搜索与筛选
- [ ] 定期账单提醒

## License
MIT License